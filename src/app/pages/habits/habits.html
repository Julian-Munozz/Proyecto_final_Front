<main>  
<div class="container">
  
  <h1>Mis Hábitos</h1>

  
  <button class="btn-create" (click)="openForm()" *ngIf="!showForm"> Nuevo Hábito</button>

  <div class="form-container" *ngIf="showForm">
    
  <form class="formulario" [formGroup]="habitForm" (ngSubmit)="handleSubmit()">
    <h2>{{ isEditing ? 'Editar' : 'Crear' }} Hábito</h2>
    
    <div class="mb-3">
      <label for="tittle" class="form-label">Título</label>
      <input 
        type="text"
        class="form-control"
        id="tittle"
        formControlName="tittle"
        placeholder="Título *">
    </div>

    <div class="mb-3">
      <label for="category" class="form-label">Categoría</label>
      <select 
        class="form-control"
        id="category"
        formControlName="category">
        <option value="Salud">Salud</option>
        <option value="Ejercicio">Ejercicio</option>
        <option value="Productividad">Productividad</option>
        <option value="Mindfulness">Mindfulness</option>
      </select>
    </div>

    <div class="mb-3">
      <label for="description" class="form-label">Descripción</label>
      <textarea 
        class="form-control"
        id="description"
        formControlName="description"
        placeholder="Descripción *"
        rows="3"></textarea>
    </div>

    <div class="mb-3">
      <label for="benefit" class="form-label">Beneficio</label>
      <input 
        type="text"
        class="form-control"
        id="benefit"
        formControlName="benefit"
        placeholder="Beneficio">
    </div>

    <div class="mb-3">
      <label for="img" class="form-label">Imagen</label>
      <input 
        type="file"
        class="form-control"
        id="img"
        formControlName="img"
        accept="image/*"
        (change)="fileChange($event)">
    </div>

    <div class="form-buttons">
      <button type="button" class="btn-cancel" (click)="closeForm()">Cancelar</button>
      <button type="submit" class="btn">Guardar</button>
    </div>
  </form>
</div>

  <!-- LISTA DE HÁBITOS -->
  <div class="habits-list" *ngIf="!showForm">
    
    <div class="habit-card" *ngFor="let habit of habits">
      <img [src]="habit.img || '/default.jpg'" alt="Hábito">
      
      <div class="habit-info">
        <span class="category">{{ habit.category }}</span>
        <h3>{{ habit.tittle }}</h3>
        <p>{{ habit.description }}</p>
        <small *ngIf="habit.benefit">💡 {{ habit.benefit }}</small>
      </div>

      <div class="habit-actions">
        <button class="btn-edit" (click)="editHabit(habit)">✏️</button>
        <button class="btn-delete" (click)="deleteHabitsById(habit._id)">🗑️</button>
      </div>
    </div>

    <div *ngIf="habits.length === 0" class="empty">
      <p>No hay hábitos. ¡Crea tu primer hábito!</p>
    </div>
  </div>

</div>

</main>
